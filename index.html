<!doctype html>
<html>
<head>
<title>ManyOne</title>
<meta charset="utf-8"></meta>
<style>
  /**
  * (c) 2014 Ben Bucksch
  * License: GPL3, see LICENSE
  */
  html, body {
    width: 100%;
    height: 100%;
    padding: 0 0 0 0;
    margin: 0 0 0 0;
    display: flex;
    display: -webkit-flex;
    flex-direction: column;
    -webkit-flex: column;
  }
  #uninav {
    width: 100%;
    height: 200px;

    padding: 0 0 0 0;
    margin: 0 0 0 0;
    border: none;

    flex: 1;
    -webkit-flex: 1;
}
  #content {
    width: 100%;
    min-height: 500px;

    padding: 0 0 0 0;
    margin: 0 0 0 0;
    border: none;
    flex: 3;
    -webkit-flex: 3;
  }
</style>
<script type="text/javascript">
/**
 * Start a page change to go to another DU topic.
 *
 * This doesn't entirely reload the current page,
 * just changes the content. Called SPA "Single Page Architecture".
 *
 * Currently called directly from uninav iframe.
 * This direction function call works, because it's the same domain.
 * Alternative: events sent via postMessage(), see below.
 */
function openTopic(topic) {
  document.getElementById("content").setAttribute("src", topic.targetURL);
}

window.addEventListener("DOMContentLoaded", function(event) {
  //document.getElementById("content").setAttribute("src", topic.targetURL);
});

// listen to page change events from uninav
/*
window.addEventListener("message", function(event) {
  if (event.origin != "http://www.manyone.zone") {
    alert("msg from wrong origin " + event.origin + ":\n" + event.data);
    return;
  }
  alert("msg from " + event.origin + ":\n" + event.data);
  openTopic(event.data);
}, false);
*/
</script>
</head>
<body>
<iframe id="uninav" src="uninav.html"></iframe>

<iframe id="content" src="about:blank"></iframe>

</body>
</html>
